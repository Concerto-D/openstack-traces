\begin{lstlisting}[label=some-code,caption=Some Code]
class Apache (Component):
  def create(self):
    places = [
        'wtg',
        'prd',
        'cfd',
        'std',
        'chd'
    ]
    transitions = {
        'provision': ('wtg','prd', self.f_prov),
        'pull': ('pr', 'cfd', self.f_pull),
        'conf': ('pr', 'cfd', self.f_conf),
        'bootstrap': ('prd', 'cfd', self.f_boots),
        'start': ('cfd', 'std', self.f_start),
        'check': ('std', 'chd', self.f_check)
    }
    dependencies = {
        'ipMDB': (DepType.DATA_USE, ['conf']),
        'serviceMDB': (DepType.USE, ['check'])
    }

    def f_prov(self):
        # execution of bash scripts
        # execution of ansible playbooks
        # etc.
    def f_pull(self):
        # ...
    def f_conf(self):
        # ...
    def f_boots(self):
        # ...
    def f_start(self):
        # ...
    def f_check(self):
        # ...
\end{lstlisting}
